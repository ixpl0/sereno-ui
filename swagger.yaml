basePath: /api/v1
definitions:
  event.RequestComment:
    properties:
      text:
        example: Comment text
        type: string
    required:
    - text
    type: object
  event.RequestID:
    properties:
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
    required:
    - id
    type: object
  event.RequestIncident:
    properties:
      description:
        example: Incident description
        type: string
      tenant:
        $ref: '#/definitions/event.RequestID'
      title:
        example: Incident title
        type: string
    required:
    - tenant
    - title
    type: object
  event.RequestKey:
    properties:
      key:
        example: Key
        maxLength: 32
        minLength: 1
        type: string
    required:
    - key
    type: object
  event.RequestKeyValue:
    properties:
      key:
        example: Key
        maxLength: 32
        minLength: 1
        type: string
      value:
        example: Value
        maxLength: 64
        minLength: 1
        type: string
    required:
    - key
    - value
    type: object
  event.RequestStatus:
    properties:
      status:
        enum:
        - acknowledged
        - resolved
        example: acknowledged
        type: string
    required:
    - status
    type: object
  event.ResponseAlert:
    properties:
      annotations:
        items:
          $ref: '#/definitions/event.ResponseAnnotation'
        type: array
      comments:
        items:
          $ref: '#/definitions/event.ResponseComment'
        type: array
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
      labels:
        items:
          $ref: '#/definitions/event.ResponseLabel'
        type: array
      source:
        example: alertmanager
        type: string
      statuses:
        items:
          $ref: '#/definitions/event.ResponseStatus'
        type: array
      tenant:
        $ref: '#/definitions/event.ResponseTenant'
      time:
        example: 1766412596
        type: integer
    required:
    - annotations
    - comments
    - id
    - labels
    - source
    - statuses
    - tenant
    - time
    type: object
  event.ResponseAlertList:
    properties:
      alerts:
        items:
          $ref: '#/definitions/event.ResponseAlert'
        type: array
      total:
        example: 10
        type: integer
    required:
    - alerts
    - total
    type: object
  event.ResponseAnnotation:
    properties:
      deleted:
        example: false
        type: boolean
      key:
        example: description
        type: string
      since:
        example: 1766412596
        type: integer
      value:
        example: CPU usage is 92% in 5 minutes
        type: string
    required:
    - deleted
    - key
    - since
    - value
    type: object
  event.ResponseComment:
    properties:
      deleted:
        example: false
        type: boolean
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
      since:
        example: 1766412596
        type: integer
      text:
        example: Comment text
        type: string
    required:
    - deleted
    - id
    - since
    - text
    type: object
  event.ResponseIncident:
    properties:
      alerts:
        items:
          $ref: '#/definitions/event.ResponseAlert'
        type: array
      comments:
        items:
          $ref: '#/definitions/event.ResponseComment'
        type: array
      description:
        example: Incident description
        type: string
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
      labels:
        items:
          $ref: '#/definitions/event.ResponseLabel'
        type: array
      statuses:
        items:
          $ref: '#/definitions/event.ResponseStatus'
        type: array
      tenant:
        $ref: '#/definitions/event.ResponseTenant'
      time:
        example: 1766412596
        type: integer
      title:
        example: Incident title
        type: string
    required:
    - alerts
    - comments
    - id
    - labels
    - statuses
    - tenant
    - time
    - title
    type: object
  event.ResponseIncidentList:
    properties:
      incidents:
        items:
          $ref: '#/definitions/event.ResponseIncident'
        type: array
      total:
        example: 10
        type: integer
    required:
    - incidents
    - total
    type: object
  event.ResponseLabel:
    properties:
      deleted:
        example: false
        type: boolean
      key:
        example: alertname
        type: string
      since:
        example: 1766412596
        type: integer
      value:
        example: CriticalCpuUsage
        type: string
    required:
    - deleted
    - key
    - since
    - value
    type: object
  event.ResponseSingleAlert:
    properties:
      alert:
        $ref: '#/definitions/event.ResponseAlert'
    required:
    - alert
    type: object
  event.ResponseSingleIncident:
    properties:
      incident:
        $ref: '#/definitions/event.ResponseIncident'
    required:
    - incident
    type: object
  event.ResponseStatus:
    properties:
      since:
        example: 1766412596
        type: integer
      status:
        example: created
        type: string
    required:
    - since
    - status
    type: object
  event.ResponseTenant:
    properties:
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
    required:
    - id
    type: object
  server.ResponseError:
    properties:
      error:
        example: Error message
        type: string
      request_id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
    type: object
  tenant.RequestID:
    properties:
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
    required:
    - id
    type: object
  tenant.RequestMember:
    properties:
      admin:
        description: TODO Как валидировать ?
        example: true
        type: boolean
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
    required:
    - id
    type: object
  tenant.RequestName:
    properties:
      name:
        example: Name of this subject
        maxLength: 64
        minLength: 1
        type: string
    required:
    - name
    type: object
  tenant.ResponseMember:
    properties:
      admin:
        example: true
        type: boolean
      email:
        example: ivan@ivanov.ru
        type: string
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
      name:
        example: Ivan Ivanov
        type: string
      since:
        example: 1766412596
        type: integer
    required:
    - admin
    - id
    - since
    type: object
  tenant.ResponseMemberList:
    properties:
      members:
        items:
          $ref: '#/definitions/tenant.ResponseMember'
        type: array
    required:
    - members
    type: object
  tenant.ResponseSingleMember:
    properties:
      member:
        $ref: '#/definitions/tenant.ResponseMember'
    required:
    - member
    type: object
  tenant.ResponseSingleTenant:
    properties:
      tenant:
        $ref: '#/definitions/tenant.ResponseTenant'
    required:
    - tenant
    type: object
  tenant.ResponseSingleToken:
    properties:
      token:
        $ref: '#/definitions/tenant.ResponseToken'
    required:
    - token
    type: object
  tenant.ResponseTenant:
    properties:
      admin:
        example: true
        type: boolean
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
      name:
        example: My team name
        type: string
      since:
        example: 1766412596
        type: integer
    required:
    - id
    - name
    type: object
  tenant.ResponseTenantList:
    properties:
      tenants:
        items:
          $ref: '#/definitions/tenant.ResponseTenant'
        type: array
    required:
    - tenants
    type: object
  tenant.ResponseToken:
    properties:
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
      name:
        example: My first token
        type: string
      secret:
        example: sat_1234567890abcdefghijkABCDEFGHIJK
        type: string
      since:
        example: 1766412596
        type: integer
    required:
    - id
    - name
    - since
    type: object
  tenant.ResponseTokenList:
    properties:
      tokens:
        items:
          $ref: '#/definitions/tenant.ResponseToken'
        type: array
    required:
    - tokens
    type: object
  user.RequestCode:
    properties:
      code:
        example: "12345678"
        type: string
    required:
    - code
    type: object
  user.RequestContact:
    properties:
      kind:
        enum:
        - email
        - telegram
        example: email
        type: string
      value:
        example: admin@example.com
        type: string
    required:
    - kind
    - value
    type: object
  user.RequestEmail:
    properties:
      email:
        example: user@example.com
        type: string
    required:
    - email
    type: object
  user.RequestEmailCode:
    properties:
      code:
        example: "12345678"
        type: string
      email:
        example: user@example.com
        type: string
    required:
    - code
    - email
    type: object
  user.RequestParameter:
    properties:
      kind:
        enum:
        - first_name
        - last_name
        - timezone
        - language
        example: first_name
        type: string
      value:
        example: Ivan
        type: string
    required:
    - kind
    - value
    type: object
  user.ResponseAccessJWT:
    properties:
      token:
        example: eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJ0...ZiJ9.MFrP...ddBw
        type: string
      type:
        example: bearer
        type: string
    required:
    - token
    - type
    type: object
  user.ResponseContact:
    properties:
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
      kind:
        enum:
        - email
        - telegram
        example: email
        type: string
      value:
        example: user@example.com
        type: string
      verified:
        example: true
        type: boolean
    required:
    - id
    - kind
    - value
    - verified
    type: object
  user.ResponseContactsList:
    properties:
      contacts:
        items:
          $ref: '#/definitions/user.ResponseContact'
        type: array
    required:
    - contacts
    type: object
  user.ResponseSession:
    properties:
      current:
        example: true
        type: boolean
      device:
        example: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:45.0) Gecko/20100101 Firefox/45.0
        type: string
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
      since:
        example: 1766412596
        type: integer
    required:
    - current
    - device
    - id
    - since
    type: object
  user.ResponseSessions:
    properties:
      sessions:
        items:
          $ref: '#/definitions/user.ResponseSession'
        type: array
    required:
    - sessions
    type: object
  user.ResponseSingleContact:
    properties:
      contact:
        $ref: '#/definitions/user.ResponseContact'
    required:
    - contact
    type: object
  user.ResponseSingleUser:
    properties:
      user:
        $ref: '#/definitions/user.ResponseUser'
    required:
    - user
    type: object
  user.ResponseUser:
    properties:
      first_name:
        example: Ivan
        type: string
      id:
        example: 00112233-4455-6677-8899-aabbccddeeff
        type: string
      last_name:
        example: Ivanov
        type: string
      timezone:
        example: Europe/Moscow
        type: string
    required:
    - id
    type: object
host: localhost:8080
info:
  contact: {}
  description: OnCall компонент Sereno Systems
  title: Sereno OnCall REST API
paths:
  /alerts:
    get:
      description: Возвращает алерты всех доступных тенантов
      parameters:
      - description: Alerts limit
        in: query
        name: limit
        type: integer
      - description: Alerts offset
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseAlertList'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Алерты
      tags:
      - alerts
  /alerts/{id}:
    get:
      description: Возвращает алерт по ID
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleAlert'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Алерт
      tags:
      - alerts
  /alerts/{id}/annotations/add:
    post:
      consumes:
      - application/json
      description: Добавляет аннотацию алерту
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestKeyValue'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleAlert'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Добавление аннотации алерту
      tags:
      - alerts
  /alerts/{id}/annotations/delete:
    post:
      consumes:
      - application/json
      description: Удаляет аннотацию у улерта
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestKey'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleAlert'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Удаление аннотации у алерта
      tags:
      - alerts
  /alerts/{id}/comments/add:
    post:
      consumes:
      - application/json
      description: Добавляет комментарий алерту
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestComment'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleAlert'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Добавление комментария алерту
      tags:
      - alerts
  /alerts/{id}/comments/delete:
    post:
      consumes:
      - application/json
      description: Удаляет комментарий у алерта
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestID'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleAlert'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Удаление комментария у алерта
      tags:
      - alerts
  /alerts/{id}/labels/add:
    post:
      consumes:
      - application/json
      description: Добавляет лейбл алерту
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestKeyValue'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleAlert'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Добавление лейбла алерту
      tags:
      - alerts
  /alerts/{id}/labels/delete:
    post:
      consumes:
      - application/json
      description: Удаляет лейбл у алерта
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestKey'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleAlert'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Удаление лейбла у алерта
      tags:
      - alerts
  /alerts/{id}/status/set:
    post:
      consumes:
      - application/json
      description: 'Устанавливает статус: acknowledged или resolved'
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestStatus'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleAlert'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Установка статуса
      tags:
      - alerts
  /alerts/create:
    post:
      consumes:
      - application/json
      description: Принимает webhook от системы мониторинга, парсит и создает в базе
        Alert
      parameters:
      - description: Webhook source
        in: query
        name: source
        required: true
        type: string
      - description: Webhook JSON
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      responses:
        "201":
          description: Created
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - StaticAccessToken: []
      summary: Создание алерта (integration webhook)
      tags:
      - alerts
  /auth/login/{provider}:
    get:
      description: Вход через поддерживаемых OAuth провайдеров
      parameters:
      - description: 'OAuth provider: yandex, vk, keycloak'
        in: path
        name: provider
        required: true
        type: string
      responses: {}
      summary: (NotImplemented) Вход через OAuth
      tags:
      - auth
  /auth/login/{provider}/callback:
    get:
      description: Обработка OAuth Callback от провайдера
      parameters:
      - description: 'OAuth provider: yandex, vk, keycloak'
        in: path
        name: provider
        required: true
        type: string
      responses: {}
      summary: (NotImplemented) OAuth сallback
      tags:
      - auth
  /auth/login/email:
    post:
      consumes:
      - application/json
      description: Проверяет Email и одноразовый код, создает/обновляет сессию и отдает
        новые AccessJWT + RefreshJWT
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/user.RequestEmailCode'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          headers:
            Set-Cookie:
              description: jwt_refresh=...; Path=/api/v1/auth/refresh; Max-Age=864000;
                Secure; HttpOnly
              type: string
          schema:
            $ref: '#/definitions/user.ResponseAccessJWT'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      summary: Вход по Email
      tags:
      - auth
  /auth/login/email/code:
    post:
      consumes:
      - application/json
      description: Формируется и отправляется на электронную почту одноразовый код
        аутентификации по Email
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/user.RequestEmail'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      summary: Запрос кода на Email
      tags:
      - auth
  /auth/logout:
    post:
      consumes:
      - application/json
      description: Удаляет сессию из репозитория и Cookie
      responses:
        "204":
          description: No Content
          headers:
            Set-Cookie:
              description: jwt_refresh=empty; Path=/api/v1/auth/refresh; Max-Age=-1;
                Secure; HttpOnly
              type: string
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Выход
      tags:
      - auth
  /auth/refresh:
    post:
      description: Валидирует RefreshJWT, обновляет существующую сессию и отдает новый
        AccessJWT
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.ResponseAccessJWT'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - RefreshJWT: []
      summary: Новый AccessJWT
      tags:
      - auth
  /incidents:
    get:
      description: Возвращает инциденты всех доступных тенантов
      parameters:
      - description: Incidents limit
        in: query
        name: limit
        type: integer
      - description: Incidents offset
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseIncidentList'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Инциденты
      tags:
      - incidents
  /incidents/{id}:
    get:
      description: Возвращает инцидент по ID
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleIncident'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Инцидент
      tags:
      - incidents
  /incidents/{id}/alerts/add:
    post:
      consumes:
      - application/json
      description: Добавляет алерт в инцидент
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestID'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleIncident'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Добавление алерта в инцидент
      tags:
      - incidents
  /incidents/{id}/alerts/delete:
    post:
      consumes:
      - application/json
      description: Удаляет алерт из инцидент
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestID'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleIncident'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Удаление алерта из инцидента
      tags:
      - incidents
  /incidents/{id}/comments/add:
    post:
      consumes:
      - application/json
      description: Добавляет комментарий инциденту
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestComment'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleIncident'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Добавление комментария инциденту
      tags:
      - incidents
  /incidents/{id}/comments/delete:
    post:
      consumes:
      - application/json
      description: Удаляет комментарий у инцидента
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestID'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleIncident'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Удаление комментария у инцидента
      tags:
      - incidents
  /incidents/{id}/labels/add:
    post:
      consumes:
      - application/json
      description: Добавляет лейбл инциденту
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestKeyValue'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleIncident'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Добавление лейбла инциденту
      tags:
      - incidents
  /incidents/{id}/labels/delete:
    post:
      consumes:
      - application/json
      description: Удаляет лейбл у инцидента
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestKey'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleIncident'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Удаление лейбла у инцидента
      tags:
      - incidents
  /incidents/{id}/status/set:
    post:
      consumes:
      - application/json
      description: 'Устанавливает статус: acknowledged или resolved'
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestStatus'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseSingleIncident'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Установка статуса
      tags:
      - incidents
  /incidents/create:
    post:
      consumes:
      - application/json
      description: Создает инцидент
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/event.RequestIncident'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/event.ResponseIncident'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Создание инцидента
      tags:
      - incidents
  /tenants:
    get:
      description: Возвращает список тенантов текущего пользователя с указанием прав
        доступа
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/tenant.ResponseTenantList'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Список тенантов пользователя
      tags:
      - tenants
  /tenants/{id}/members:
    get:
      description: Возвращает пользователей Tenant по его ID
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/tenant.ResponseMemberList'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Список пользователей тенанта
      tags:
      - tenant/members
  /tenants/{id}/members/delete:
    post:
      consumes:
      - application/json
      description: Удаляет пользователь из Tenant по его ID
      parameters:
      - description: Tenant ID
        in: path
        name: id
        required: true
        type: string
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/tenant.RequestID'
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Удаление пользователя из тенанта
      tags:
      - tenant/members
  /tenants/{id}/members/update:
    post:
      consumes:
      - application/json
      description: Добавляет / изменяет права пользователя в Tenant по его ID
      parameters:
      - description: Tenant ID
        in: path
        name: id
        required: true
        type: string
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/tenant.RequestMember'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/tenant.ResponseSingleMember'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Управление пользователями в тенанте
      tags:
      - tenant/members
  /tenants/{id}/tokens:
    get:
      description: Возвращает список статичных токенов для Tenant по его ID используемые
        сервисами алертинга и мониторинга
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/tenant.ResponseTokenList'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Список статичных токенов
      tags:
      - tenant/tokens
  /tenants/{id}/tokens/create:
    post:
      consumes:
      - application/json
      description: Создает статичный токен, используемый сервисами алертинга и мониторинга
      parameters:
      - description: Tenant ID
        in: path
        name: id
        required: true
        type: string
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/tenant.RequestName'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/tenant.ResponseSingleToken'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Создание статичного токена
      tags:
      - tenant/tokens
  /tenants/{id}/tokens/delete:
    post:
      description: Удаляет интеграционный токен по его ID
      parameters:
      - description: Tenant ID
        in: path
        name: id
        required: true
        type: string
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/tenant.RequestID'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Удаление интеграционного токена
      tags:
      - tenant/tokens
  /tenants/{id}/update:
    post:
      consumes:
      - application/json
      description: 'Изменяет Tenant: название, ...'
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/tenant.RequestName'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/tenant.ResponseSingleTenant'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Изменение тенант
      tags:
      - tenants
  /tenants/create:
    post:
      consumes:
      - application/json
      description: Создает новый Tenant с указанным названием
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/tenant.RequestName'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/tenant.ResponseSingleTenant'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Создание тенант
      tags:
      - tenants
  /user:
    get:
      description: Возвращает информацию о текущем пользователе
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.ResponseSingleUser'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Информацию о пользователе
      tags:
      - user
  /user/contacts:
    get:
      description: Возвращает список контактов текущего пользователя
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.ResponseContactsList'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Список контактов пользователя
      tags:
      - user/contacts
  /user/contacts/{id}/delete:
    post:
      description: Удаляет контакт текущего пользователя
      parameters:
      - description: Contact ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Удаление контакта пользователя
      tags:
      - user/contacts
  /user/contacts/{id}/verify:
    post:
      consumes:
      - application/json
      description: Верифицирует контакт текущего пользователя по одноразовому коду
      parameters:
      - description: Contact ID
        in: path
        name: id
        required: true
        type: string
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/user.RequestCode'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.ResponseSingleContact'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Верификация контакта пользователя
      tags:
      - user/contacts
  /user/contacts/add:
    post:
      consumes:
      - application/json
      description: Добавляет контакт текущему пользователю
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/user.RequestContact'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/user.ResponseSingleContact'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Добавление контакта пользователя
      tags:
      - user/contacts
  /user/sessions:
    get:
      description: Возвращает список сессий текущего пользователя
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.ResponseSessions'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Список сессий пользователя
      tags:
      - user/sessions
  /user/sessions/close:
    post:
      description: Закрывает все сессии пользователя кроме текущей
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Заркытие сессий пользователя
      tags:
      - user/sessions
  /user/update:
    post:
      consumes:
      - application/json
      description: Обновляет параметры в профиле текущего пользователя
      parameters:
      - description: Request JSON
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/user.RequestParameter'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.ResponseSingleUser'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ResponseError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ResponseError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ResponseError'
      security:
      - AccessJWT: []
      summary: Обновление профиль пользователе
      tags:
      - user
securityDefinitions:
  AccessJWT:
    in: header
    name: Authorization
    type: apiKey
  RefreshJWT:
    in: header
    name: Cookie
    type: apiKey
  StaticAccessToken:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
